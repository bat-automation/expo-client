directive @owner on FIELD_DEFINITION
directive @auth on FIELD_DEFINITION

interface Node { 
    id: ID!
}
type RegisterPayload { 
    user: User!
}
type LoginPayload { 
    user: User!
}
type CheckUsernamePayload { 
    available: Boolean!
}
type SwitchedPayload { 
    turned: SWITCH!
    relay: Int!
}
type MyDevicesPayolad { 
    devices: [Device]
}
type RegisterWithDevicePayload { 
    success: Boolean
}
type Device implements Node { 
    owner: User
    name: String
    users: [User]
    id: ID!
    createdAt: String
    updatedAt: String
}
type CreateDevicePayload { 
    token: String!
}
type BaseNode { 
    id: ID!
    createdAt: String
    updatedAt: String
}
type PageInfo { 
    hasNextPage: Boolean!
    hasPreviousPage: Boolean!
    startCursor: String
    endCursor: String
}
type Payload { 
    error: String
}
type User implements Node { 
    email: String
    id: ID!
    createdAt: String
    updatedAt: String
}
type Query { 
    myDevices: MyDevicesPayolad! @auth
    node(id: ID!): Node
}
type Mutation { 
    register(newUser: RegisterInput!): RegisterPayload!
    login: LoginPayload! @auth
    checkPreRegister(check: CheckPreRegister!): CheckUsernamePayload!
    switch(input: SwitchInput!): Boolean @auth
    registerWithDevice(input: RegisterWithDeviceInput!): RegisterWithDevicePayload!
    checkQRCode(input: RegisterWithDeviceInput!): RegisterWithDevicePayload!
    createDevice(device: CreateDeviceInput!): CreateDevicePayload!
}
type Subscription { 
    switched: SwitchedPayload!
}
input RegisterInput { 
    username: String!
}
input CheckPreRegister { 
    username: String!
}
input SwitchInput { 
    turn: SWITCH!
    relay: Int!
}
input RegisterWithDeviceInput { 
    qrcode: String!
    name: String
}
input CreateDeviceInput { 
    id: String
}
enum SWITCH { 
    ON
    OFF
}